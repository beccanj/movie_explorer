{
    "sourceFile": "src/pages/SecurityPages/SecurityOverview.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 7,
            "patches": [
                {
                    "date": 1752985297000,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1752985333241,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,1 @@\n+import { AlertTriangle } from \"lucide-react\";\r\n"
                },
                {
                    "date": 1752985378363,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,141 @@\n+import React, { useState, useEffect } from \"react\";\r\n+\r\n+import Layout from \"../../components/layout/Layout\";\r\n+import Navigation from \"../../components/Navigation\";\r\n+import Card1 from \"../../components/Card1\";\r\n+import Card2 from \"../../components/Card2\";\r\n+import Card3 from \"../../components/Card3\";\r\n+import Chart from \"../../components/Chart\";\r\n+import { AlertTriangle } from \"lucide-react\";\r\n+import DashboardTable from \"../../components/tables/DashboardTable\";\r\n+import { getDashboardStatistics } from \"../../services/dashboardService\";\r\n+import useVisitorStats from \"../../hooks/useVisitorStats\";\r\n+\r\n+const Dashboard = () => {\r\n+  const [stats, setStats] = useState([]);\r\n+  const [loading, setLoading] = useState(true);\r\n+\r\n+  \r\n+  const {\r\n+    stats: visitorStats,\r\n+    loading: visitorLoading,\r\n+    error: visitorError,\r\n+    totalVisitors,\r\n+  } = useVisitorStats();\r\n+\r\n+  useEffect(() => {\r\n+    const fetchStats = async () => {\r\n+      try {\r\n+        const data = await getDashboardStatistics();\r\n+        setStats(data);\r\n+      } catch (error) {\r\n+        console.error(\"Failed to load dashboard stats:\", error);\r\n+      } finally {\r\n+        setLoading(false);\r\n+      }\r\n+    };\r\n+\r\n+    fetchStats();\r\n+  }, []);\r\n+\r\n+  console.log(stats);\r\n+  console.log(\"Visitor stats:\", visitorStats);\r\n+\r\n+  return (\r\n+    <Layout>\r\n+      <div className=\"flex flex-wrap justify-start mb-[12px]\">\r\n+        <Card1\r\n+          cardTitle=\"Current Visitors\"\r\n+          count={visitorLoading ? \"...\" : stats?.visitors?.total}\r\n+          link=\"View log\"\r\n+          linkHref=\"/visitorlogs\"\r\n+          icon={\r\n+            <img\r\n+              src=\"/doorbell.svg\"\r\n+              alt=\"Doorbell Icon\"\r\n+              className=\"w-6 h-6 object-contain\"\r\n+            />\r\n+          }\r\n+        />\r\n+        <Card1\r\n+          cardTitle=\"Active Incidents\"\r\n+          count={loading ? \"...\" : stats?.incidents_in_progress?.total || 0}\r\n+          link=\"View details\"\r\n+          linkHref=\"/incident_report\"\r\n+          icon={\r\n+            <img\r\n+              src=\"/active.svg\"\r\n+              alt=\"Incidents Icon\"\r\n+              className=\"w-6 h-6 object-contain\"\r\n+            />\r\n+          }\r\n+        />\r\n+        <Card1\r\n+          cardTitle=\"Emergencies Today\"\r\n+          count={\r\n+            loading ? \"...\" : stats?.emergencies?.stats?.today_emergencies || 0\r\n+          }\r\n+          link=\"View details\"\r\n+          linkHref=\"/emergencypage\"\r\n+          icon={\r\n+            <img\r\n+              src=\"/911.svg\"\r\n+              alt=\"Emergency Icon\"\r\n+              className=\"w-6 h-6 object-contain\"\r\n+            />\r\n+          }\r\n+        />\r\n+        <Card1\r\n+          cardTitle=\"Total Active Users\"\r\n+          count={loading ? \"...\" : stats?.users?.total || 0}\r\n+          link=\"View users\"\r\n+          linkHref=\"/userspage\"\r\n+          icon={\r\n+            <img\r\n+              src=\"/users.svg\"\r\n+              alt=\"Users Icon\"\r\n+              className=\"w-6 h-6 object-contain\"\r\n+            />\r\n+          }\r\n+        />\r\n+      </div>\r\n+\r\n+      {visitorError && (\r\n+        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\">\r\n+          {visitorError}\r\n+        </div>\r\n+      )}\r\n+\r\n+      <div className=\"mb-[30px]\">\r\n+        <Card2\r\n+          label=\"Active Incidents\"\r\n+          value={loading ? \"...\" : stats?.incidents?.total || 0}\r\n+          icon={<AlertTriangle className=\"h-6 w-6 text-red-600\" />}\r\n+          iconBg=\"bg-red-100\"\r\n+          buttonText=\"View details\"\r\n+        />\r\n+      </div>\r\n+\r\n+      <div className=\"w-full flex flex-col lg:flex-row gap-6 mb-8\">\r\n+        \r\n+        <div className=\"bg-white lg:w-3/4 p-3 rounded-lg shadow flex-1 lg:flex-initial\">\r\n+          <Chart />\r\n+        </div>\r\n+        \r\n+\r\n+        <div className=\"lg:w-1/4 flex-1 lg:flex-initial\">\r\n+          <Card3\r\n+            companyVisitors={loading ? 0 : stats?.visitor_totals?.company || 0}\r\n+            residentVisitors={loading ? 0 : stats?.visitor_totals?.resident || 0}\r\n+            serviceProviders={loading ? 0 : stats?.visitor_totals?.service || 0}\r\n+            className=\"h-full\"\r\n+          />\r\n+        </div>\r\n+      </div>\r\n+\r\n+      <DashboardTable />\r\n+    </Layout>\r\n+  );\r\n+};\r\n+\r\n+export default Dashboard;\r\n"
                },
                {
                    "date": 1752985404841,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,141 @@\n+import React, { useState, useEffect } from \"react\";\r\n+\r\n+import Layout from \"../../components/layout/Layout\";\r\n+import Navigation from \"../../components/Navigation\";\r\n+import Card1 from \"../../components/Card1\";\r\n+import Card2 from \"../../components/Card2\";\r\n+import Card3 from \"../../components/Card3\";\r\n+import Chart from \"../../components/Chart\";\r\n+import { AlertTriangle } from \"lucide-react\";\r\n+import DashboardTable from \"../../components/tables/DashboardTable\";\r\n+import { getDashboardStatistics } from \"../../services/dashboardService\";\r\n+import useVisitorStats from \"../../hooks/useVisitorStats\";\r\n+\r\n+const  = () => {\r\n+  const [stats, setStats] = useState([]);\r\n+  const [loading, setLoading] = useState(true);\r\n+\r\n+  \r\n+  const {\r\n+    stats: visitorStats,\r\n+    loading: visitorLoading,\r\n+    error: visitorError,\r\n+    totalVisitors,\r\n+  } = useVisitorStats();\r\n+\r\n+  useEffect(() => {\r\n+    const fetchStats = async () => {\r\n+      try {\r\n+        const data = await getDashboardStatistics();\r\n+        setStats(data);\r\n+      } catch (error) {\r\n+        console.error(\"Failed to load dashboard stats:\", error);\r\n+      } finally {\r\n+        setLoading(false);\r\n+      }\r\n+    };\r\n+\r\n+    fetchStats();\r\n+  }, []);\r\n+\r\n+  console.log(stats);\r\n+  console.log(\"Visitor stats:\", visitorStats);\r\n+\r\n+  return (\r\n+    <Layout>\r\n+      <div className=\"flex flex-wrap justify-start mb-[12px]\">\r\n+        <Card1\r\n+          cardTitle=\"Current Visitors\"\r\n+          count={visitorLoading ? \"...\" : stats?.visitors?.total}\r\n+          link=\"View log\"\r\n+          linkHref=\"/visitorlogs\"\r\n+          icon={\r\n+            <img\r\n+              src=\"/doorbell.svg\"\r\n+              alt=\"Doorbell Icon\"\r\n+              className=\"w-6 h-6 object-contain\"\r\n+            />\r\n+          }\r\n+        />\r\n+        <Card1\r\n+          cardTitle=\"Active Incidents\"\r\n+          count={loading ? \"...\" : stats?.incidents_in_progress?.total || 0}\r\n+          link=\"View details\"\r\n+          linkHref=\"/incident_report\"\r\n+          icon={\r\n+            <img\r\n+              src=\"/active.svg\"\r\n+              alt=\"Incidents Icon\"\r\n+              className=\"w-6 h-6 object-contain\"\r\n+            />\r\n+          }\r\n+        />\r\n+        <Card1\r\n+          cardTitle=\"Emergencies Today\"\r\n+          count={\r\n+            loading ? \"...\" : stats?.emergencies?.stats?.today_emergencies || 0\r\n+          }\r\n+          link=\"View details\"\r\n+          linkHref=\"/emergencypage\"\r\n+          icon={\r\n+            <img\r\n+              src=\"/911.svg\"\r\n+              alt=\"Emergency Icon\"\r\n+              className=\"w-6 h-6 object-contain\"\r\n+            />\r\n+          }\r\n+        />\r\n+        <Card1\r\n+          cardTitle=\"Total Active Users\"\r\n+          count={loading ? \"...\" : stats?.users?.total || 0}\r\n+          link=\"View users\"\r\n+          linkHref=\"/userspage\"\r\n+          icon={\r\n+            <img\r\n+              src=\"/users.svg\"\r\n+              alt=\"Users Icon\"\r\n+              className=\"w-6 h-6 object-contain\"\r\n+            />\r\n+          }\r\n+        />\r\n+      </div>\r\n+\r\n+      {visitorError && (\r\n+        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\">\r\n+          {visitorError}\r\n+        </div>\r\n+      )}\r\n+\r\n+      <div className=\"mb-[30px]\">\r\n+        <Card2\r\n+          label=\"Active Incidents\"\r\n+          value={loading ? \"...\" : stats?.incidents?.total || 0}\r\n+          icon={<AlertTriangle className=\"h-6 w-6 text-red-600\" />}\r\n+          iconBg=\"bg-red-100\"\r\n+          buttonText=\"View details\"\r\n+        />\r\n+      </div>\r\n+\r\n+      <div className=\"w-full flex flex-col lg:flex-row gap-6 mb-8\">\r\n+        \r\n+        <div className=\"bg-white lg:w-3/4 p-3 rounded-lg shadow flex-1 lg:flex-initial\">\r\n+          <Chart />\r\n+        </div>\r\n+        \r\n+\r\n+        <div className=\"lg:w-1/4 flex-1 lg:flex-initial\">\r\n+          <Card3\r\n+            companyVisitors={loading ? 0 : stats?.visitor_totals?.company || 0}\r\n+            residentVisitors={loading ? 0 : stats?.visitor_totals?.resident || 0}\r\n+            serviceProviders={loading ? 0 : stats?.visitor_totals?.service || 0}\r\n+            className=\"h-full\"\r\n+          />\r\n+        </div>\r\n+      </div>\r\n+\r\n+      <DashboardTable />\r\n+    </Layout>\r\n+  );\r\n+};\r\n+\r\n+export default Dashboard;\r\n"
                },
                {
                    "date": 1752985411164,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,141 @@\n+import React, { useState, useEffect } from \"react\";\r\n+\r\n+import Layout from \"../../components/layout/Layout\";\r\n+import Navigation from \"../../components/Navigation\";\r\n+import Card1 from \"../../components/Card1\";\r\n+import Card2 from \"../../components/Card2\";\r\n+import Card3 from \"../../components/Card3\";\r\n+import Chart from \"../../components/Chart\";\r\n+import { AlertTriangle } from \"lucide-react\";\r\n+import DashboardTable from \"../../components/tables/DashboardTable\";\r\n+import { getDashboardStatistics } from \"../../services/dashboardService\";\r\n+import useVisitorStats from \"../../hooks/useVisitorStats\";\r\n+\r\n+const SecurityO = () => {\r\n+  const [stats, setStats] = useState([]);\r\n+  const [loading, setLoading] = useState(true);\r\n+\r\n+  \r\n+  const {\r\n+    stats: visitorStats,\r\n+    loading: visitorLoading,\r\n+    error: visitorError,\r\n+    totalVisitors,\r\n+  } = useVisitorStats();\r\n+\r\n+  useEffect(() => {\r\n+    const fetchStats = async () => {\r\n+      try {\r\n+        const data = await getDashboardStatistics();\r\n+        setStats(data);\r\n+      } catch (error) {\r\n+        console.error(\"Failed to load dashboard stats:\", error);\r\n+      } finally {\r\n+        setLoading(false);\r\n+      }\r\n+    };\r\n+\r\n+    fetchStats();\r\n+  }, []);\r\n+\r\n+  console.log(stats);\r\n+  console.log(\"Visitor stats:\", visitorStats);\r\n+\r\n+  return (\r\n+    <Layout>\r\n+      <div className=\"flex flex-wrap justify-start mb-[12px]\">\r\n+        <Card1\r\n+          cardTitle=\"Current Visitors\"\r\n+          count={visitorLoading ? \"...\" : stats?.visitors?.total}\r\n+          link=\"View log\"\r\n+          linkHref=\"/visitorlogs\"\r\n+          icon={\r\n+            <img\r\n+              src=\"/doorbell.svg\"\r\n+              alt=\"Doorbell Icon\"\r\n+              className=\"w-6 h-6 object-contain\"\r\n+            />\r\n+          }\r\n+        />\r\n+        <Card1\r\n+          cardTitle=\"Active Incidents\"\r\n+          count={loading ? \"...\" : stats?.incidents_in_progress?.total || 0}\r\n+          link=\"View details\"\r\n+          linkHref=\"/incident_report\"\r\n+          icon={\r\n+            <img\r\n+              src=\"/active.svg\"\r\n+              alt=\"Incidents Icon\"\r\n+              className=\"w-6 h-6 object-contain\"\r\n+            />\r\n+          }\r\n+        />\r\n+        <Card1\r\n+          cardTitle=\"Emergencies Today\"\r\n+          count={\r\n+            loading ? \"...\" : stats?.emergencies?.stats?.today_emergencies || 0\r\n+          }\r\n+          link=\"View details\"\r\n+          linkHref=\"/emergencypage\"\r\n+          icon={\r\n+            <img\r\n+              src=\"/911.svg\"\r\n+              alt=\"Emergency Icon\"\r\n+              className=\"w-6 h-6 object-contain\"\r\n+            />\r\n+          }\r\n+        />\r\n+        <Card1\r\n+          cardTitle=\"Total Active Users\"\r\n+          count={loading ? \"...\" : stats?.users?.total || 0}\r\n+          link=\"View users\"\r\n+          linkHref=\"/userspage\"\r\n+          icon={\r\n+            <img\r\n+              src=\"/users.svg\"\r\n+              alt=\"Users Icon\"\r\n+              className=\"w-6 h-6 object-contain\"\r\n+            />\r\n+          }\r\n+        />\r\n+      </div>\r\n+\r\n+      {visitorError && (\r\n+        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\">\r\n+          {visitorError}\r\n+        </div>\r\n+      )}\r\n+\r\n+      <div className=\"mb-[30px]\">\r\n+        <Card2\r\n+          label=\"Active Incidents\"\r\n+          value={loading ? \"...\" : stats?.incidents?.total || 0}\r\n+          icon={<AlertTriangle className=\"h-6 w-6 text-red-600\" />}\r\n+          iconBg=\"bg-red-100\"\r\n+          buttonText=\"View details\"\r\n+        />\r\n+      </div>\r\n+\r\n+      <div className=\"w-full flex flex-col lg:flex-row gap-6 mb-8\">\r\n+        \r\n+        <div className=\"bg-white lg:w-3/4 p-3 rounded-lg shadow flex-1 lg:flex-initial\">\r\n+          <Chart />\r\n+        </div>\r\n+        \r\n+\r\n+        <div className=\"lg:w-1/4 flex-1 lg:flex-initial\">\r\n+          <Card3\r\n+            companyVisitors={loading ? 0 : stats?.visitor_totals?.company || 0}\r\n+            residentVisitors={loading ? 0 : stats?.visitor_totals?.resident || 0}\r\n+            serviceProviders={loading ? 0 : stats?.visitor_totals?.service || 0}\r\n+            className=\"h-full\"\r\n+          />\r\n+        </div>\r\n+      </div>\r\n+\r\n+      <DashboardTable />\r\n+    </Layout>\r\n+  );\r\n+};\r\n+\r\n+export default Dashboard;\r\n"
                },
                {
                    "date": 1752985424321,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,141 @@\n+import React, { useState, useEffect } from \"react\";\r\n+\r\n+import Layout from \"../../components/layout/Layout\";\r\n+import Navigation from \"../../components/Navigation\";\r\n+import Card1 from \"../../components/Card1\";\r\n+import Card2 from \"../../components/Card2\";\r\n+import Card3 from \"../../components/Card3\";\r\n+import Chart from \"../../components/Chart\";\r\n+import { AlertTriangle } from \"lucide-react\";\r\n+import DashboardTable from \"../../components/tables/DashboardTable\";\r\n+import { getDashboardStatistics } from \"../../services/dashboardService\";\r\n+import useVisitorStats from \"../../hooks/useVisitorStats\";\r\n+\r\n+const SecurityOverview = () => {\r\n+  const [stats, setStats] = useState([]);\r\n+  const [loading, setLoading] = useState(true);\r\n+\r\n+  \r\n+  const {\r\n+    stats: visitorStats,\r\n+    loading: visitorLoading,\r\n+    error: visitorError,\r\n+    totalVisitors,\r\n+  } = useVisitorStats();\r\n+\r\n+  useEffect(() => {\r\n+    const fetchStats = async () => {\r\n+      try {\r\n+        const data = await getDashboardStatistics();\r\n+        setStats(data);\r\n+      } catch (error) {\r\n+        console.error(\"Failed to load dashboard stats:\", error);\r\n+      } finally {\r\n+        setLoading(false);\r\n+      }\r\n+    };\r\n+\r\n+    fetchStats();\r\n+  }, []);\r\n+\r\n+  console.log(stats);\r\n+  console.log(\"Visitor stats:\", visitorStats);\r\n+\r\n+  return (\r\n+    <Layout>\r\n+      <div className=\"flex flex-wrap justify-start mb-[12px]\">\r\n+        <Card1\r\n+          cardTitle=\"Current Visitors\"\r\n+          count={visitorLoading ? \"...\" : stats?.visitors?.total}\r\n+          link=\"View log\"\r\n+          linkHref=\"/visitorlogs\"\r\n+          icon={\r\n+            <img\r\n+              src=\"/doorbell.svg\"\r\n+              alt=\"Doorbell Icon\"\r\n+              className=\"w-6 h-6 object-contain\"\r\n+            />\r\n+          }\r\n+        />\r\n+        <Card1\r\n+          cardTitle=\"Active Incidents\"\r\n+          count={loading ? \"...\" : stats?.incidents_in_progress?.total || 0}\r\n+          link=\"View details\"\r\n+          linkHref=\"/incident_report\"\r\n+          icon={\r\n+            <img\r\n+              src=\"/active.svg\"\r\n+              alt=\"Incidents Icon\"\r\n+              className=\"w-6 h-6 object-contain\"\r\n+            />\r\n+          }\r\n+        />\r\n+        <Card1\r\n+          cardTitle=\"Emergencies Today\"\r\n+          count={\r\n+            loading ? \"...\" : stats?.emergencies?.stats?.today_emergencies || 0\r\n+          }\r\n+          link=\"View details\"\r\n+          linkHref=\"/emergencypage\"\r\n+          icon={\r\n+            <img\r\n+              src=\"/911.svg\"\r\n+              alt=\"Emergency Icon\"\r\n+              className=\"w-6 h-6 object-contain\"\r\n+            />\r\n+          }\r\n+        />\r\n+        <Card1\r\n+          cardTitle=\"Total Active Users\"\r\n+          count={loading ? \"...\" : stats?.users?.total || 0}\r\n+          link=\"View users\"\r\n+          linkHref=\"/userspage\"\r\n+          icon={\r\n+            <img\r\n+              src=\"/users.svg\"\r\n+              alt=\"Users Icon\"\r\n+              className=\"w-6 h-6 object-contain\"\r\n+            />\r\n+          }\r\n+        />\r\n+      </div>\r\n+\r\n+      {visitorError && (\r\n+        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\">\r\n+          {visitorError}\r\n+        </div>\r\n+      )}\r\n+\r\n+      <div className=\"mb-[30px]\">\r\n+        <Card2\r\n+          label=\"Active Incidents\"\r\n+          value={loading ? \"...\" : stats?.incidents?.total || 0}\r\n+          icon={<AlertTriangle className=\"h-6 w-6 text-red-600\" />}\r\n+          iconBg=\"bg-red-100\"\r\n+          buttonText=\"View details\"\r\n+        />\r\n+      </div>\r\n+\r\n+      <div className=\"w-full flex flex-col lg:flex-row gap-6 mb-8\">\r\n+        \r\n+        <div className=\"bg-white lg:w-3/4 p-3 rounded-lg shadow flex-1 lg:flex-initial\">\r\n+          <Chart />\r\n+        </div>\r\n+        \r\n+\r\n+        <div className=\"lg:w-1/4 flex-1 lg:flex-initial\">\r\n+          <Card3\r\n+            companyVisitors={loading ? 0 : stats?.visitor_totals?.company || 0}\r\n+            residentVisitors={loading ? 0 : stats?.visitor_totals?.resident || 0}\r\n+            serviceProviders={loading ? 0 : stats?.visitor_totals?.service || 0}\r\n+            className=\"h-full\"\r\n+          />\r\n+        </div>\r\n+      </div>\r\n+\r\n+      <DashboardTable />\r\n+    </Layout>\r\n+  );\r\n+};\r\n+\r\n+export default ;\r\n"
                },
                {
                    "date": 1752985431403,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,141 @@\n+import React, { useState, useEffect } from \"react\";\r\n+\r\n+import Layout from \"../../components/layout/Layout\";\r\n+import Navigation from \"../../components/Navigation\";\r\n+import Card1 from \"../../components/Card1\";\r\n+import Card2 from \"../../components/Card2\";\r\n+import Card3 from \"../../components/Card3\";\r\n+import Chart from \"../../components/Chart\";\r\n+import { AlertTriangle } from \"lucide-react\";\r\n+import DashboardTable from \"../../components/tables/DashboardTable\";\r\n+import { getDashboardStatistics } from \"../../services/dashboardService\";\r\n+import useVisitorStats from \"../../hooks/useVisitorStats\";\r\n+\r\n+const SecurityOverview = () => {\r\n+  const [stats, setStats] = useState([]);\r\n+  const [loading, setLoading] = useState(true);\r\n+\r\n+  \r\n+  const {\r\n+    stats: visitorStats,\r\n+    loading: visitorLoading,\r\n+    error: visitorError,\r\n+    totalVisitors,\r\n+  } = useVisitorStats();\r\n+\r\n+  useEffect(() => {\r\n+    const fetchStats = async () => {\r\n+      try {\r\n+        const data = await getDashboardStatistics();\r\n+        setStats(data);\r\n+      } catch (error) {\r\n+        console.error(\"Failed to load dashboard stats:\", error);\r\n+      } finally {\r\n+        setLoading(false);\r\n+      }\r\n+    };\r\n+\r\n+    fetchStats();\r\n+  }, []);\r\n+\r\n+  console.log(stats);\r\n+  console.log(\"Visitor stats:\", visitorStats);\r\n+\r\n+  return (\r\n+    <Layout>\r\n+      <div className=\"flex flex-wrap justify-start mb-[12px]\">\r\n+        <Card1\r\n+          cardTitle=\"Current Visitors\"\r\n+          count={visitorLoading ? \"...\" : stats?.visitors?.total}\r\n+          link=\"View log\"\r\n+          linkHref=\"/visitorlogs\"\r\n+          icon={\r\n+            <img\r\n+              src=\"/doorbell.svg\"\r\n+              alt=\"Doorbell Icon\"\r\n+              className=\"w-6 h-6 object-contain\"\r\n+            />\r\n+          }\r\n+        />\r\n+        <Card1\r\n+          cardTitle=\"Active Incidents\"\r\n+          count={loading ? \"...\" : stats?.incidents_in_progress?.total || 0}\r\n+          link=\"View details\"\r\n+          linkHref=\"/incident_report\"\r\n+          icon={\r\n+            <img\r\n+              src=\"/active.svg\"\r\n+              alt=\"Incidents Icon\"\r\n+              className=\"w-6 h-6 object-contain\"\r\n+            />\r\n+          }\r\n+        />\r\n+        <Card1\r\n+          cardTitle=\"Emergencies Today\"\r\n+          count={\r\n+            loading ? \"...\" : stats?.emergencies?.stats?.today_emergencies || 0\r\n+          }\r\n+          link=\"View details\"\r\n+          linkHref=\"/emergencypage\"\r\n+          icon={\r\n+            <img\r\n+              src=\"/911.svg\"\r\n+              alt=\"Emergency Icon\"\r\n+              className=\"w-6 h-6 object-contain\"\r\n+            />\r\n+          }\r\n+        />\r\n+        <Card1\r\n+          cardTitle=\"Total Active Users\"\r\n+          count={loading ? \"...\" : stats?.users?.total || 0}\r\n+          link=\"View users\"\r\n+          linkHref=\"/userspage\"\r\n+          icon={\r\n+            <img\r\n+              src=\"/users.svg\"\r\n+              alt=\"Users Icon\"\r\n+              className=\"w-6 h-6 object-contain\"\r\n+            />\r\n+          }\r\n+        />\r\n+      </div>\r\n+\r\n+      {visitorError && (\r\n+        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\">\r\n+          {visitorError}\r\n+        </div>\r\n+      )}\r\n+\r\n+      <div className=\"mb-[30px]\">\r\n+        <Card2\r\n+          label=\"Active Incidents\"\r\n+          value={loading ? \"...\" : stats?.incidents?.total || 0}\r\n+          icon={<AlertTriangle className=\"h-6 w-6 text-red-600\" />}\r\n+          iconBg=\"bg-red-100\"\r\n+          buttonText=\"View details\"\r\n+        />\r\n+      </div>\r\n+\r\n+      <div className=\"w-full flex flex-col lg:flex-row gap-6 mb-8\">\r\n+        \r\n+        <div className=\"bg-white lg:w-3/4 p-3 rounded-lg shadow flex-1 lg:flex-initial\">\r\n+          <Chart />\r\n+        </div>\r\n+        \r\n+\r\n+        <div className=\"lg:w-1/4 flex-1 lg:flex-initial\">\r\n+          <Card3\r\n+            companyVisitors={loading ? 0 : stats?.visitor_totals?.company || 0}\r\n+            residentVisitors={loading ? 0 : stats?.visitor_totals?.resident || 0}\r\n+            serviceProviders={loading ? 0 : stats?.visitor_totals?.service || 0}\r\n+            className=\"h-full\"\r\n+          />\r\n+        </div>\r\n+      </div>\r\n+\r\n+      <DashboardTable />\r\n+    </Layout>\r\n+  );\r\n+};\r\n+\r\n+export default SecurityOver;\r\n"
                },
                {
                    "date": 1752985438303,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,141 @@\n+import React, { useState, useEffect } from \"react\";\r\n+\r\n+import Layout from \"../../components/layout/Layout\";\r\n+import Navigation from \"../../components/Navigation\";\r\n+import Card1 from \"../../components/Card1\";\r\n+import Card2 from \"../../components/Card2\";\r\n+import Card3 from \"../../components/Card3\";\r\n+import Chart from \"../../components/Chart\";\r\n+import { AlertTriangle } from \"lucide-react\";\r\n+import DashboardTable from \"../../components/tables/DashboardTable\";\r\n+import { getDashboardStatistics } from \"../../services/dashboardService\";\r\n+import useVisitorStats from \"../../hooks/useVisitorStats\";\r\n+\r\n+const SecurityOverview = () => {\r\n+  const [stats, setStats] = useState([]);\r\n+  const [loading, setLoading] = useState(true);\r\n+\r\n+  \r\n+  const {\r\n+    stats: visitorStats,\r\n+    loading: visitorLoading,\r\n+    error: visitorError,\r\n+    totalVisitors,\r\n+  } = useVisitorStats();\r\n+\r\n+  useEffect(() => {\r\n+    const fetchStats = async () => {\r\n+      try {\r\n+        const data = await getDashboardStatistics();\r\n+        setStats(data);\r\n+      } catch (error) {\r\n+        console.error(\"Failed to load dashboard stats:\", error);\r\n+      } finally {\r\n+        setLoading(false);\r\n+      }\r\n+    };\r\n+\r\n+    fetchStats();\r\n+  }, []);\r\n+\r\n+  console.log(stats);\r\n+  console.log(\"Visitor stats:\", visitorStats);\r\n+\r\n+  return (\r\n+    <Layout>\r\n+      <div className=\"flex flex-wrap justify-start mb-[12px]\">\r\n+        <Card1\r\n+          cardTitle=\"Current Visitors\"\r\n+          count={visitorLoading ? \"...\" : stats?.visitors?.total}\r\n+          link=\"View log\"\r\n+          linkHref=\"/visitorlogs\"\r\n+          icon={\r\n+            <img\r\n+              src=\"/doorbell.svg\"\r\n+              alt=\"Doorbell Icon\"\r\n+              className=\"w-6 h-6 object-contain\"\r\n+            />\r\n+          }\r\n+        />\r\n+        <Card1\r\n+          cardTitle=\"Active Incidents\"\r\n+          count={loading ? \"...\" : stats?.incidents_in_progress?.total || 0}\r\n+          link=\"View details\"\r\n+          linkHref=\"/incident_report\"\r\n+          icon={\r\n+            <img\r\n+              src=\"/active.svg\"\r\n+              alt=\"Incidents Icon\"\r\n+              className=\"w-6 h-6 object-contain\"\r\n+            />\r\n+          }\r\n+        />\r\n+        <Card1\r\n+          cardTitle=\"Emergencies Today\"\r\n+          count={\r\n+            loading ? \"...\" : stats?.emergencies?.stats?.today_emergencies || 0\r\n+          }\r\n+          link=\"View details\"\r\n+          linkHref=\"/emergencypage\"\r\n+          icon={\r\n+            <img\r\n+              src=\"/911.svg\"\r\n+              alt=\"Emergency Icon\"\r\n+              className=\"w-6 h-6 object-contain\"\r\n+            />\r\n+          }\r\n+        />\r\n+        <Card1\r\n+          cardTitle=\"Total Active Users\"\r\n+          count={loading ? \"...\" : stats?.users?.total || 0}\r\n+          link=\"View users\"\r\n+          linkHref=\"/userspage\"\r\n+          icon={\r\n+            <img\r\n+              src=\"/users.svg\"\r\n+              alt=\"Users Icon\"\r\n+              className=\"w-6 h-6 object-contain\"\r\n+            />\r\n+          }\r\n+        />\r\n+      </div>\r\n+\r\n+      {visitorError && (\r\n+        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\">\r\n+          {visitorError}\r\n+        </div>\r\n+      )}\r\n+\r\n+      <div className=\"mb-[30px]\">\r\n+        <Card2\r\n+          label=\"Active Incidents\"\r\n+          value={loading ? \"...\" : stats?.incidents?.total || 0}\r\n+          icon={<AlertTriangle className=\"h-6 w-6 text-red-600\" />}\r\n+          iconBg=\"bg-red-100\"\r\n+          buttonText=\"View details\"\r\n+        />\r\n+      </div>\r\n+\r\n+      <div className=\"w-full flex flex-col lg:flex-row gap-6 mb-8\">\r\n+        \r\n+        <div className=\"bg-white lg:w-3/4 p-3 rounded-lg shadow flex-1 lg:flex-initial\">\r\n+          <Chart />\r\n+        </div>\r\n+        \r\n+\r\n+        <div className=\"lg:w-1/4 flex-1 lg:flex-initial\">\r\n+          <Card3\r\n+            companyVisitors={loading ? 0 : stats?.visitor_totals?.company || 0}\r\n+            residentVisitors={loading ? 0 : stats?.visitor_totals?.resident || 0}\r\n+            serviceProviders={loading ? 0 : stats?.visitor_totals?.service || 0}\r\n+            className=\"h-full\"\r\n+          />\r\n+        </div>\r\n+      </div>\r\n+\r\n+      <DashboardTable />\r\n+    </Layout>\r\n+  );\r\n+};\r\n+\r\n+export default SecurityOverv;\r\n"
                }
            ],
            "date": 1752985297000,
            "name": "Commit-0",
            "content": "ra"
        }
    ]
}