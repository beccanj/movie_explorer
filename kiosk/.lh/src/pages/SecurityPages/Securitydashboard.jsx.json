{
    "sourceFile": "src/pages/SecurityPages/Securitydashboard.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1753423731969,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1753423731969,
            "name": "Commit-0",
            "content": "import React, { useState, useEffect } from \"react\";\r\n\r\nimport SecurityLayout from \"../../components/SecurityComponents/SecurityLayout\";\r\nimport Navigation from \"../../components/Navigation\";\r\nimport Card1 from \"../../components/Card1\";\r\nimport Card6 from \"../../components/Card6\";\r\nimport LiveLogsTable from \"../../components/SecurityComponents/LiveLogsTable\";\r\nimport { getDashboardStatistics } from \"../../services/dashboardService\";\r\nimport useSecurityDashboardStats from \"../../hooks/useSecurityDashboardStats\";\r\n\r\nexport default function SecurityDashboard(){\r\n  const [stats, setStats] = useState([]);\r\n  const [/*loading*/, setLoading] = useState(true);\r\n\r\n  const statistics = useSecurityDashboardStats();\r\n\r\n\r\n  useEffect(() => {\r\n    const fetchStats = async () => {\r\n      try {\r\n        const data = await getDashboardStatistics();\r\n        setStats(data);\r\n      } catch (error) {\r\n        console.error(\"Failed to load dashboard stats:\", error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchStats();\r\n  }, []);\r\n\r\n  console.log(stats);\r\n  console.log(\"Statistics:\", statistics);\r\n\r\n  return (\r\n    <SecurityLayout>\r\n      <div className=\"flex flex-wrap justify-start mb-[12px]\">\r\n        <Card1\r\n          cardTitle=\"Expected Visitors\"\r\n          count={statistics.loading ? \"...\" : statistics.expectedVisitors || 0}\r\n          link=\"View log\"\r\n          linkHref=\"/visitorsexpected\"\r\n          icon={\r\n            <img\r\n              src=\"/doorbell.svg\"\r\n              alt=\"Doorbell Icon\"\r\n              className=\"w-6 h-6 object-contain\"\r\n            />\r\n          }\r\n        />\r\n        <Card1\r\n          cardTitle=\"Checked In Visitors\"\r\n          count={statistics.loading ? \"...\" : statistics.checkedInVisitors || 0}\r\n          link=\"View log\"\r\n          linkHref=\"/incident_report\"\r\n          icon={\r\n            <img\r\n              src=\"/active.svg\"\r\n              alt=\"Incidents Icon\"\r\n              className=\"w-6 h-6 object-contain\"\r\n            />\r\n          }\r\n        />\r\n        <Card1\r\n          cardTitle=\"Checked Out Visitors\"\r\n          count={\r\n            statistics.loading ? \"...\" : statistics.checkedOutVisitors || 0\r\n          }\r\n          link=\"View log\"\r\n          linkHref=\"/checkincheckout\"\r\n          icon={\r\n            <img\r\n              src=\"/911.svg\"\r\n              alt=\"Emergency Icon\"\r\n              className=\"w-6 h-6 object-contain\"\r\n            />\r\n          }\r\n        />\r\n        <Card1\r\n          cardTitle=\"Emergency Today\"\r\n          count={statistics.loading ? \"...\" : statistics.emergencyToday || 0}\r\n          link=\"View users\"\r\n          linkHref=\"/security/emergencypage\"\r\n          icon={\r\n            <img\r\n              src=\"/users.svg\"\r\n              alt=\"Users Icon\"\r\n              className=\"w-6 h-6 object-contain\"\r\n            />\r\n          }\r\n        />\r\n      </div>\r\n\r\n      {statistics.error && (\r\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\">\r\n          {statistics.error}\r\n        </div>\r\n      )}\r\n\r\n\r\n      <div className=\"w-full flex flex-row gap-6 mb-8\">\r\n        <div className=\"bg-white p-3 rounded-lg shadow flex-3 overflow-auto\">  \r\n            <LiveLogsTable/>  \r\n        </div>\r\n\r\n        <div className=\"\">\r\n          <div className=\"bg-white p-3 rounded-lg shadow h-full\">\r\n            <Card6/>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </SecurityLayout>\r\n  );\r\n};\r\n\r\n"
        }
    ]
}