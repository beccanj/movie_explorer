{
    "sourceFile": "src/pages/VisitorPage.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 4,
            "patches": [
                {
                    "date": 1752154176650,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1752154184299,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -161,14 +161,14 @@\n                 <label\r\n                   htmlFor=\"details\"\r\n                   className=\"block text-sm text-[#00580D] mb-2\"\r\n                 >\r\n-                  Phone number / Email / Nu\r\n+                  Phone number / Email / Number plate\r\n                 </label>\r\n                 <input\r\n                   id=\"details\"\r\n                   type=\"text\"\r\n-                  placeholder=\"e.g., +254712345678, john@gmail.com, or KCA 123A\"\r\n+                  placeholder=\"john@gmail.com, or KCA 123A\"\r\n                   required\r\n                   value={details}\r\n                   onChange={handleInputChange}\r\n                   disabled={isSubmitting}\r\n"
                },
                {
                    "date": 1752154192139,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,226 @@\n+// src/pages/VisitorPage.jsx\r\n+import React, { useState } from \"react\";\r\n+import { Link, useNavigate } from \"react-router-dom\";\r\n+import Header from \"../components/Header\";\r\n+import Navbar from \"../components/Navbar\";\r\n+import logo from \"../assets/logo.svg\";\r\n+import rectangle from \"../assets/rectangle-780.png\";\r\n+import sphere from \"../assets/sphere-green-glossy0.png\";\r\n+import { useTranslation } from \"react-i18next\";\r\n+import { kioskService } from \"../services/kiosk\";\r\n+import axios from \"axios\";\r\n+\r\n+const VisitorPage = () => {\r\n+  const [details, setDetails] = useState(\"\");\r\n+  const [error, setError] = useState(\"\");\r\n+  const [isSubmitting, setIsSubmitting] = useState(false);\r\n+  const navigate = useNavigate();\r\n+  const { t } = useTranslation();\r\n+\r\n+  const validatePhoneNumber = (phone) => {\r\n+    const phoneRegex = /^(\\+254|0)[17]\\d{8}$|^(\\+254|0)[14]\\d{8}$/;\r\n+    return phoneRegex.test(phone.replace(/\\s+/g, \"\"));\r\n+  };\r\n+\r\n+  const validateEmail = (email) => {\r\n+    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n+    return emailRegex.test(email);\r\n+  };\r\n+\r\n+  const validateNumberPlate = (plate) => {\r\n+    const plateRegex = /^K[A-Z]{2,3}\\s\\d{3}[A-Z]$/i;\r\n+    return plateRegex.test(plate.toUpperCase());\r\n+  };\r\n+\r\n+  const detectAndValidateInput = (input) => {\r\n+    const trimmedInput = input.trim();\r\n+\r\n+    if (!trimmedInput) {\r\n+      return {\r\n+        isValid: false,\r\n+        error: \"Please enter your phone number, email, or number plate\",\r\n+      };\r\n+    }\r\n+\r\n+    if (trimmedInput.includes(\"@\")) {\r\n+      if (validateEmail(trimmedInput)) {\r\n+        return { isValid: true, type: \"email\" };\r\n+      } else {\r\n+        return {\r\n+          isValid: false,\r\n+          error: \"Please enter a valid email address (e.g., example@gmail.com)\",\r\n+        };\r\n+      }\r\n+    }\r\n+\r\n+    if (/^(\\+|0)/.test(trimmedInput) && /^\\+?[\\d\\s]+$/.test(trimmedInput)) {\r\n+      if (validatePhoneNumber(trimmedInput)) {\r\n+        return { isValid: true, type: \"phone\" };\r\n+      } else {\r\n+        return {\r\n+          isValid: false,\r\n+          error:\r\n+            \"Please enter a valid Kenyan phone number (e.g., +254712345678 or 0712345678)\",\r\n+        };\r\n+      }\r\n+    }\r\n+\r\n+    if (/^K[A-Z]/i.test(trimmedInput)) {\r\n+      if (validateNumberPlate(trimmedInput)) {\r\n+        return { isValid: true, type: \"numberplate\" };\r\n+      } else {\r\n+        return {\r\n+          isValid: false,\r\n+          error: \"Please enter a valid Kenyan number plate (e.g., KCA 123A)\",\r\n+        };\r\n+      }\r\n+    }\r\n+\r\n+    return {\r\n+      isValid: false,\r\n+      error:\r\n+        \"Please enter a valid phone number (+254XXXXXXXXX), email (example@gmail.com), or number plate (KCA 123A)\",\r\n+    };\r\n+  };\r\n+\r\n+  const handleSubmit = async (e) => {\r\n+    e.preventDefault();\r\n+\r\n+    const validation = detectAndValidateInput(details);\r\n+\r\n+    if (!validation.isValid) {\r\n+      setError(validation.error);\r\n+      return;\r\n+    }\r\n+\r\n+    setError(\"\");\r\n+    setIsSubmitting(true);\r\n+\r\n+    const finalForm = {\r\n+      identifier: details,\r\n+    };\r\n+\r\n+    try {\r\n+      const response = await kioskService.checkIn(finalForm);\r\n+\r\n+      console.log(\"Response:\", response.data.ref_number);\r\n+      navigate(\"/welcomeback\", {\r\n+        state: {\r\n+          refNumber: response.data.ref_number,\r\n+          full_name: response.data.visitor.full_name,\r\n+        },\r\n+      });\r\n+    } catch (error) {\r\n+      console.error(\"Error submitting form:\", error);\r\n+\r\n+      setError(\r\n+        error.response?.data?.message ||\r\n+          \"An error occurred while submitting your details. Please try again.\"\r\n+      );\r\n+    } finally {\r\n+      setIsSubmitting(false);\r\n+    }\r\n+  };\r\n+\r\n+  const handleInputChange = (e) => {\r\n+    setDetails(e.target.value);\r\n+\r\n+    if (error) {\r\n+      setError(\"\");\r\n+    }\r\n+  };\r\n+\r\n+  return (\r\n+    <div className=\"flex flex-col min-h-screen w-full max-w-full overflow-x-hidden relative\">\r\n+      <Header />\r\n+\r\n+      <div className=\"flex flex-col lg:flex-row w-full flex-1 overflow-hidden\">\r\n+        <div\r\n+          className=\"w-full lg:w-1/2 h-[250px] sm:h-[300px] lg:h-auto bg-cover bg-center flex items-center justify-center p-4\"\r\n+          style={{ backgroundImage: `url(${rectangle})` }}\r\n+        >\r\n+          <img\r\n+            src={logo}\r\n+            alt=\"West Brook Logo\"\r\n+            className=\"max-w-[150px] sm:max-w-[200px] lg:max-w-[250px] max-h-[200px] sm:max-h-[300px] lg:max-h-[500px] w-full h-auto animate-bounce-once\"\r\n+          />\r\n+        </div>\r\n+\r\n+        <div className=\"w-full lg:w-1/2 bg-[#E6FBE9] relative flex flex-col items-center px-4 sm:px-6 lg:px-8 py-6 lg:pt-0 lg:pb-10 min-h-[600px] lg:min-h-full\">\r\n+          <div className=\"hidden lg:flex w-full justify-between items-center mt-0 mb-10\">\r\n+            <Navbar />\r\n+          </div>\r\n+\r\n+          <div className=\"w-full max-w-sm sm:max-w-md text-start flex-1 flex flex-col justify-center lg:mt-10\">\r\n+            <h2 className=\"text-lg sm:text-xl font-semibold text-[#00580D] mb-4 sm:mb-6 text-center lg:text-left lg:-ml-7\">\r\n+              {t(\"submitDetails\")}\r\n+            </h2>\r\n+\r\n+            <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n+              <div>\r\n+                <label\r\n+                  htmlFor=\"details\"\r\n+                  className=\"block text-sm text-[#00580D] mb-2\"\r\n+                >\r\n+                  Phone number / Email\r\n+                </label>\r\n+                <input\r\n+                  id=\"details\"\r\n+                  type=\"text\"\r\n+                  placeholder=\"john@gmail.com\"\r\n+                  required\r\n+                  value={details}\r\n+                  onChange={handleInputChange}\r\n+                  disabled={isSubmitting}\r\n+                  className={`w-full px-3 sm:px-4 py-3 sm:py-4 border-2 rounded-md bg-white text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-green-500 transition-colors ${\r\n+                    error ? \"border-red-500\" : \"border-green-200\"\r\n+                  } ${isSubmitting ? \"opacity-50 cursor-not-allowed\" : \"\"}`}\r\n+                />\r\n+              </div>\r\n+\r\n+              {error && (\r\n+                <p className=\"text-red-500 text-xs sm:text-sm leading-tight\">\r\n+                  {error}\r\n+                </p>\r\n+              )}\r\n+\r\n+              <button\r\n+                type=\"submit\"\r\n+                disabled={isSubmitting}\r\n+                className={`w-full py-3 sm:py-4 text-white rounded-md shadow-md font-medium text-sm sm:text-base hover:shadow-lg transition-shadow ${\r\n+                  isSubmitting ? \"opacity-50 cursor-not-allowed\" : \"\"\r\n+                }`}\r\n+                style={{\r\n+                  background:\r\n+                    \"linear-gradient(90deg, rgba(0,210,30,1) 0%, rgba(0,88,13,1) 100%)\",\r\n+                }}\r\n+              >\r\n+                {isSubmitting ? \"Submitting...\" : \"Submit\"}\r\n+              </button>\r\n+            </form>\r\n+\r\n+            <div className=\"flex items-center my-6 sm:my-8\">\r\n+              <hr className=\"flex-grow border-t border-dashed border-purple-600\" />\r\n+              <span className=\"mx-3 sm:mx-4 text-purple-600 text-xs sm:text-sm\">\r\n+                or\r\n+              </span>\r\n+              <hr className=\"flex-grow border-t border-dashed border-purple-600\" />\r\n+            </div>\r\n+\r\n+            <p className=\"text-xs sm:text-sm text-[#00580D] text-center\">\r\n+              {t(\"let Security Scan the QR code sent to your email\")}\r\n+            </p>\r\n+          </div>\r\n+\r\n+          <img\r\n+            src={sphere}\r\n+            alt=\"Decorative sphere\"\r\n+            className=\"hidden lg:block w-[120px] xl:w-[150px] absolute bottom-0 right-0 translate-x-1/3 xl:translate-x-1/2 translate-y-1/3 xl:translate-y-1/2 opacity-80\"\r\n+          />\r\n+        </div>\r\n+      </div>\r\n+    </div>\r\n+  );\r\n+};\r\n+\r\n+export default VisitorPage;\r\n"
                },
                {
                    "date": 1752154200612,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -165,9 +165,9 @@\n                  Email\r\n                 </label>\r\n                 <input\r\n                   id=\"details\"\r\n-                  type=\"text\"\r\n+                  type=\"email\"\r\n                   placeholder=\"john@gmail.com\"\r\n                   required\r\n                   value={details}\r\n                   onChange={handleInputChange}\r\n"
                },
                {
                    "date": 1752154267523,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,226 @@\n+// src/pages/VisitorPage.jsx\r\n+import React, { useState } from \"react\";\r\n+import { Link, useNavigate } from \"react-router-dom\";\r\n+import Header from \"../components/Header\";\r\n+import Navbar from \"../components/Navbar\";\r\n+import logo from \"../assets/logo.svg\";\r\n+import rectangle from \"../assets/rectangle-780.png\";\r\n+import sphere from \"../assets/sphere-green-glossy0.png\";\r\n+import { useTranslation } from \"react-i18next\";\r\n+import { kioskService } from \"../services/kiosk\";\r\n+import axios from \"axios\";\r\n+\r\n+const VisitorPage = () => {\r\n+  const [details, setDetails] = useState(\"\");\r\n+  const [error, setError] = useState(\"\");\r\n+  const [isSubmitting, setIsSubmitting] = useState(false);\r\n+  const navigate = useNavigate();\r\n+  const { t } = useTranslation();\r\n+\r\n+  const validatePhoneNumber = (phone) => {\r\n+    const phoneRegex = /^(\\+254|0)[17]\\d{8}$|^(\\+254|0)[14]\\d{8}$/;\r\n+    return phoneRegex.test(phone.replace(/\\s+/g, \"\"));\r\n+  };\r\n+\r\n+  const validateEmail = (email) => {\r\n+    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n+    return emailRegex.test(email);\r\n+  };\r\n+\r\n+  const validateNumberPlate = (plate) => {\r\n+    const plateRegex = /^K[A-Z]{2,3}\\s\\d{3}[A-Z]$/i;\r\n+    return plateRegex.test(plate.toUpperCase());\r\n+  };\r\n+\r\n+  const detectAndValidateInput = (input) => {\r\n+    const trimmedInput = input.trim();\r\n+\r\n+    if (!trimmedInput) {\r\n+      return {\r\n+        isValid: false,\r\n+        error: \"Please enter your phone number, email, or number plate\",\r\n+      };\r\n+    }\r\n+\r\n+    if (trimmedInput.includes(\"@\")) {\r\n+      if (validateEmail(trimmedInput)) {\r\n+        return { isValid: true, type: \"email\" };\r\n+      } else {\r\n+        return {\r\n+          isValid: false,\r\n+          error: \"Please enter a valid email address (e.g., example@gmail.com)\",\r\n+        };\r\n+      }\r\n+    }\r\n+\r\n+    if (/^(\\+|0)/.test(trimmedInput) && /^\\+?[\\d\\s]+$/.test(trimmedInput)) {\r\n+      if (validatePhoneNumber(trimmedInput)) {\r\n+        return { isValid: true, type: \"phone\" };\r\n+      } else {\r\n+        return {\r\n+          isValid: false,\r\n+          error:\r\n+            \"Please enter a valid Kenyan phone number (e.g., +254712345678 or 0712345678)\",\r\n+        };\r\n+      }\r\n+    }\r\n+\r\n+    if (/^K[A-Z]/i.test(trimmedInput)) {\r\n+      if (validateNumberPlate(trimmedInput)) {\r\n+        return { isValid: true, type: \"numberplate\" };\r\n+      } else {\r\n+        return {\r\n+          isValid: false,\r\n+          error: \"Please enter a valid Kenyan number plate (e.g., KCA 123A)\",\r\n+        };\r\n+      }\r\n+    }\r\n+\r\n+    return {\r\n+      isValid: false,\r\n+      error:\r\n+        \"Please enter a valid phone number (+254XXXXXXXXX), email (example@gmail.com), or number plate (KCA 123A)\",\r\n+    };\r\n+  };\r\n+\r\n+  const handleSubmit = async (e) => {\r\n+    e.preventDefault();\r\n+\r\n+    const validation = detectAndValidateInput(details);\r\n+\r\n+    if (!validation.isValid) {\r\n+      setError(validation.error);\r\n+      return;\r\n+    }\r\n+\r\n+    setError(\"\");\r\n+    setIsSubmitting(true);\r\n+\r\n+    const finalForm = {\r\n+      identifier: detai,\r\n+    };\r\n+\r\n+    try {\r\n+      const response = await kioskService.checkIn(finalForm);\r\n+\r\n+      console.log(\"Response:\", response.data.ref_number);\r\n+      navigate(\"/welcomeback\", {\r\n+        state: {\r\n+          refNumber: response.data.ref_number,\r\n+          full_name: response.data.visitor.full_name,\r\n+        },\r\n+      });\r\n+    } catch (error) {\r\n+      console.error(\"Error submitting form:\", error);\r\n+\r\n+      setError(\r\n+        error.response?.data?.message ||\r\n+          \"An error occurred while submitting your details. Please try again.\"\r\n+      );\r\n+    } finally {\r\n+      setIsSubmitting(false);\r\n+    }\r\n+  };\r\n+\r\n+  const handleInputChange = (e) => {\r\n+    setDetails(e.target.value);\r\n+\r\n+    if (error) {\r\n+      setError(\"\");\r\n+    }\r\n+  };\r\n+\r\n+  return (\r\n+    <div className=\"flex flex-col min-h-screen w-full max-w-full overflow-x-hidden relative\">\r\n+      <Header />\r\n+\r\n+      <div className=\"flex flex-col lg:flex-row w-full flex-1 overflow-hidden\">\r\n+        <div\r\n+          className=\"w-full lg:w-1/2 h-[250px] sm:h-[300px] lg:h-auto bg-cover bg-center flex items-center justify-center p-4\"\r\n+          style={{ backgroundImage: `url(${rectangle})` }}\r\n+        >\r\n+          <img\r\n+            src={logo}\r\n+            alt=\"West Brook Logo\"\r\n+            className=\"max-w-[150px] sm:max-w-[200px] lg:max-w-[250px] max-h-[200px] sm:max-h-[300px] lg:max-h-[500px] w-full h-auto animate-bounce-once\"\r\n+          />\r\n+        </div>\r\n+\r\n+        <div className=\"w-full lg:w-1/2 bg-[#E6FBE9] relative flex flex-col items-center px-4 sm:px-6 lg:px-8 py-6 lg:pt-0 lg:pb-10 min-h-[600px] lg:min-h-full\">\r\n+          <div className=\"hidden lg:flex w-full justify-between items-center mt-0 mb-10\">\r\n+            <Navbar />\r\n+          </div>\r\n+\r\n+          <div className=\"w-full max-w-sm sm:max-w-md text-start flex-1 flex flex-col justify-center lg:mt-10\">\r\n+            <h2 className=\"text-lg sm:text-xl font-semibold text-[#00580D] mb-4 sm:mb-6 text-center lg:text-left lg:-ml-7\">\r\n+              {t(\"submitDetails\")}\r\n+            </h2>\r\n+\r\n+            <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n+              <div>\r\n+                <label\r\n+                  htmlFor=\"details\"\r\n+                  className=\"block text-sm text-[#00580D] mb-2\"\r\n+                >\r\n+                 Email\r\n+                </label>\r\n+                <input\r\n+                  id=\"details\"\r\n+                  type=\"email\"\r\n+                  placeholder=\"john@gmail.com\"\r\n+                  required\r\n+                  value={details}\r\n+                  onChange={handleInputChange}\r\n+                  disabled={isSubmitting}\r\n+                  className={`w-full px-3 sm:px-4 py-3 sm:py-4 border-2 rounded-md bg-white text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-green-500 transition-colors ${\r\n+                    error ? \"border-red-500\" : \"border-green-200\"\r\n+                  } ${isSubmitting ? \"opacity-50 cursor-not-allowed\" : \"\"}`}\r\n+                />\r\n+              </div>\r\n+\r\n+              {error && (\r\n+                <p className=\"text-red-500 text-xs sm:text-sm leading-tight\">\r\n+                  {error}\r\n+                </p>\r\n+              )}\r\n+\r\n+              <button\r\n+                type=\"submit\"\r\n+                disabled={isSubmitting}\r\n+                className={`w-full py-3 sm:py-4 text-white rounded-md shadow-md font-medium text-sm sm:text-base hover:shadow-lg transition-shadow ${\r\n+                  isSubmitting ? \"opacity-50 cursor-not-allowed\" : \"\"\r\n+                }`}\r\n+                style={{\r\n+                  background:\r\n+                    \"linear-gradient(90deg, rgba(0,210,30,1) 0%, rgba(0,88,13,1) 100%)\",\r\n+                }}\r\n+              >\r\n+                {isSubmitting ? \"Submitting...\" : \"Submit\"}\r\n+              </button>\r\n+            </form>\r\n+\r\n+            <div className=\"flex items-center my-6 sm:my-8\">\r\n+              <hr className=\"flex-grow border-t border-dashed border-purple-600\" />\r\n+              <span className=\"mx-3 sm:mx-4 text-purple-600 text-xs sm:text-sm\">\r\n+                or\r\n+              </span>\r\n+              <hr className=\"flex-grow border-t border-dashed border-purple-600\" />\r\n+            </div>\r\n+\r\n+            <p className=\"text-xs sm:text-sm text-[#00580D] text-center\">\r\n+              {t(\"let Security Scan the QR code sent to your email\")}\r\n+            </p>\r\n+          </div>\r\n+\r\n+          <img\r\n+            src={sphere}\r\n+            alt=\"Decorative sphere\"\r\n+            className=\"hidden lg:block w-[120px] xl:w-[150px] absolute bottom-0 right-0 translate-x-1/3 xl:translate-x-1/2 translate-y-1/3 xl:translate-y-1/2 opacity-80\"\r\n+          />\r\n+        </div>\r\n+      </div>\r\n+    </div>\r\n+  );\r\n+};\r\n+\r\n+export default VisitorPage;\r\n"
                }
            ],
            "date": 1752154176650,
            "name": "Commit-0",
            "content": "// src/pages/VisitorPage.jsx\r\nimport React, { useState } from \"react\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport Header from \"../components/Header\";\r\nimport Navbar from \"../components/Navbar\";\r\nimport logo from \"../assets/logo.svg\";\r\nimport rectangle from \"../assets/rectangle-780.png\";\r\nimport sphere from \"../assets/sphere-green-glossy0.png\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { kioskService } from \"../services/kiosk\";\r\nimport axios from \"axios\";\r\n\r\nconst VisitorPage = () => {\r\n  const [details, setDetails] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const navigate = useNavigate();\r\n  const { t } = useTranslation();\r\n\r\n  const validatePhoneNumber = (phone) => {\r\n    const phoneRegex = /^(\\+254|0)[17]\\d{8}$|^(\\+254|0)[14]\\d{8}$/;\r\n    return phoneRegex.test(phone.replace(/\\s+/g, \"\"));\r\n  };\r\n\r\n  const validateEmail = (email) => {\r\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n    return emailRegex.test(email);\r\n  };\r\n\r\n  const validateNumberPlate = (plate) => {\r\n    const plateRegex = /^K[A-Z]{2,3}\\s\\d{3}[A-Z]$/i;\r\n    return plateRegex.test(plate.toUpperCase());\r\n  };\r\n\r\n  const detectAndValidateInput = (input) => {\r\n    const trimmedInput = input.trim();\r\n\r\n    if (!trimmedInput) {\r\n      return {\r\n        isValid: false,\r\n        error: \"Please enter your phone number, email, or number plate\",\r\n      };\r\n    }\r\n\r\n    if (trimmedInput.includes(\"@\")) {\r\n      if (validateEmail(trimmedInput)) {\r\n        return { isValid: true, type: \"email\" };\r\n      } else {\r\n        return {\r\n          isValid: false,\r\n          error: \"Please enter a valid email address (e.g., example@gmail.com)\",\r\n        };\r\n      }\r\n    }\r\n\r\n    if (/^(\\+|0)/.test(trimmedInput) && /^\\+?[\\d\\s]+$/.test(trimmedInput)) {\r\n      if (validatePhoneNumber(trimmedInput)) {\r\n        return { isValid: true, type: \"phone\" };\r\n      } else {\r\n        return {\r\n          isValid: false,\r\n          error:\r\n            \"Please enter a valid Kenyan phone number (e.g., +254712345678 or 0712345678)\",\r\n        };\r\n      }\r\n    }\r\n\r\n    if (/^K[A-Z]/i.test(trimmedInput)) {\r\n      if (validateNumberPlate(trimmedInput)) {\r\n        return { isValid: true, type: \"numberplate\" };\r\n      } else {\r\n        return {\r\n          isValid: false,\r\n          error: \"Please enter a valid Kenyan number plate (e.g., KCA 123A)\",\r\n        };\r\n      }\r\n    }\r\n\r\n    return {\r\n      isValid: false,\r\n      error:\r\n        \"Please enter a valid phone number (+254XXXXXXXXX), email (example@gmail.com), or number plate (KCA 123A)\",\r\n    };\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const validation = detectAndValidateInput(details);\r\n\r\n    if (!validation.isValid) {\r\n      setError(validation.error);\r\n      return;\r\n    }\r\n\r\n    setError(\"\");\r\n    setIsSubmitting(true);\r\n\r\n    const finalForm = {\r\n      identifier: details,\r\n    };\r\n\r\n    try {\r\n      const response = await kioskService.checkIn(finalForm);\r\n\r\n      console.log(\"Response:\", response.data.ref_number);\r\n      navigate(\"/welcomeback\", {\r\n        state: {\r\n          refNumber: response.data.ref_number,\r\n          full_name: response.data.visitor.full_name,\r\n        },\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Error submitting form:\", error);\r\n\r\n      setError(\r\n        error.response?.data?.message ||\r\n          \"An error occurred while submitting your details. Please try again.\"\r\n      );\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleInputChange = (e) => {\r\n    setDetails(e.target.value);\r\n\r\n    if (error) {\r\n      setError(\"\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col min-h-screen w-full max-w-full overflow-x-hidden relative\">\r\n      <Header />\r\n\r\n      <div className=\"flex flex-col lg:flex-row w-full flex-1 overflow-hidden\">\r\n        <div\r\n          className=\"w-full lg:w-1/2 h-[250px] sm:h-[300px] lg:h-auto bg-cover bg-center flex items-center justify-center p-4\"\r\n          style={{ backgroundImage: `url(${rectangle})` }}\r\n        >\r\n          <img\r\n            src={logo}\r\n            alt=\"West Brook Logo\"\r\n            className=\"max-w-[150px] sm:max-w-[200px] lg:max-w-[250px] max-h-[200px] sm:max-h-[300px] lg:max-h-[500px] w-full h-auto animate-bounce-once\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"w-full lg:w-1/2 bg-[#E6FBE9] relative flex flex-col items-center px-4 sm:px-6 lg:px-8 py-6 lg:pt-0 lg:pb-10 min-h-[600px] lg:min-h-full\">\r\n          <div className=\"hidden lg:flex w-full justify-between items-center mt-0 mb-10\">\r\n            <Navbar />\r\n          </div>\r\n\r\n          <div className=\"w-full max-w-sm sm:max-w-md text-start flex-1 flex flex-col justify-center lg:mt-10\">\r\n            <h2 className=\"text-lg sm:text-xl font-semibold text-[#00580D] mb-4 sm:mb-6 text-center lg:text-left lg:-ml-7\">\r\n              {t(\"submitDetails\")}\r\n            </h2>\r\n\r\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n              <div>\r\n                <label\r\n                  htmlFor=\"details\"\r\n                  className=\"block text-sm text-[#00580D] mb-2\"\r\n                >\r\n                  Phone number / Email / Nu\r\n                </label>\r\n                <input\r\n                  id=\"details\"\r\n                  type=\"text\"\r\n                  placeholder=\"e.g., +254712345678, john@gmail.com, or KCA 123A\"\r\n                  required\r\n                  value={details}\r\n                  onChange={handleInputChange}\r\n                  disabled={isSubmitting}\r\n                  className={`w-full px-3 sm:px-4 py-3 sm:py-4 border-2 rounded-md bg-white text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-green-500 transition-colors ${\r\n                    error ? \"border-red-500\" : \"border-green-200\"\r\n                  } ${isSubmitting ? \"opacity-50 cursor-not-allowed\" : \"\"}`}\r\n                />\r\n              </div>\r\n\r\n              {error && (\r\n                <p className=\"text-red-500 text-xs sm:text-sm leading-tight\">\r\n                  {error}\r\n                </p>\r\n              )}\r\n\r\n              <button\r\n                type=\"submit\"\r\n                disabled={isSubmitting}\r\n                className={`w-full py-3 sm:py-4 text-white rounded-md shadow-md font-medium text-sm sm:text-base hover:shadow-lg transition-shadow ${\r\n                  isSubmitting ? \"opacity-50 cursor-not-allowed\" : \"\"\r\n                }`}\r\n                style={{\r\n                  background:\r\n                    \"linear-gradient(90deg, rgba(0,210,30,1) 0%, rgba(0,88,13,1) 100%)\",\r\n                }}\r\n              >\r\n                {isSubmitting ? \"Submitting...\" : \"Submit\"}\r\n              </button>\r\n            </form>\r\n\r\n            <div className=\"flex items-center my-6 sm:my-8\">\r\n              <hr className=\"flex-grow border-t border-dashed border-purple-600\" />\r\n              <span className=\"mx-3 sm:mx-4 text-purple-600 text-xs sm:text-sm\">\r\n                or\r\n              </span>\r\n              <hr className=\"flex-grow border-t border-dashed border-purple-600\" />\r\n            </div>\r\n\r\n            <p className=\"text-xs sm:text-sm text-[#00580D] text-center\">\r\n              {t(\"let Security Scan the QR code sent to your email\")}\r\n            </p>\r\n          </div>\r\n\r\n          <img\r\n            src={sphere}\r\n            alt=\"Decorative sphere\"\r\n            className=\"hidden lg:block w-[120px] xl:w-[150px] absolute bottom-0 right-0 translate-x-1/3 xl:translate-x-1/2 translate-y-1/3 xl:translate-y-1/2 opacity-80\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VisitorPage;\r\n"
        }
    ]
}